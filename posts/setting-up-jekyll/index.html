<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Setting up a jekyll site for free using digital ocean and jekyll" /><meta name="author" content="Victor Sonck" /><meta property="og:locale" content="en" /><meta name="description" content="Jekyll with docker on DigitalOcean" /><meta property="og:description" content="Jekyll with docker on DigitalOcean" /><link rel="canonical" href="https://website-ayatu.ondigitalocean.app/posts/setting-up-jekyll/" /><meta property="og:url" content="https://website-ayatu.ondigitalocean.app/posts/setting-up-jekyll/" /><meta property="og:site_name" content="Victor Sonck" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-04T17:56:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Setting up a jekyll site for free using digital ocean and jekyll" /><meta name="twitter:site" content="@VictorSonck" /><meta name="twitter:creator" content="@Victor Sonck" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Victor Sonck"},"dateModified":"2022-03-06T17:22:24+00:00","datePublished":"2022-03-04T17:56:00+00:00","description":"Jekyll with docker on DigitalOcean","headline":"Setting up a jekyll site for free using digital ocean and jekyll","mainEntityOfPage":{"@type":"WebPage","@id":"https://website-ayatu.ondigitalocean.app/posts/setting-up-jekyll/"},"url":"https://website-ayatu.ondigitalocean.app/posts/setting-up-jekyll/"}</script><title>Setting up a jekyll site for free using digital ocean and jekyll | Victor Sonck</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Victor Sonck"><meta name="application-name" content="Victor Sonck"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://lh3.googleusercontent.com/a-/AOh14GgqsbkrX_QWkGnc8MJNlziBsAL53crO_6d6CaYkjw=s288-p-rw-no " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Victor Sonck</a></div><div class="site-subtitle font-italic">Machine Learning Freelancer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/thepycoder" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/VictorSonck" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['victor','projectwhy.be'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/victor-sonck/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Setting up a jekyll site for free using digital ocean and jekyll</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Setting up a jekyll site for free using digital ocean and jekyll</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/thepycoder">Victor Sonck</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1646416560" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-04 </em> </span> <span> Updated <em class="timeago" data-ts="1646587344" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-06 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="378 words"> <em>2 min</em> read</span></div></div></div><div class="post-content"><h1 id="jekyll-with-docker-on-digitalocean">Jekyll with docker on DigitalOcean</h1><p>Jekyll was a piece of shit to get deployed correctly, so allow me to make it easier.</p><h2 id="jekyll-dockerfile"><span class="mr-2">Jekyll Dockerfile</span><a href="#jekyll-dockerfile" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>This is where all the frustration comes from. Not only is the last jekyll docker image from 8 months ago at the time of writing, there’s plenty of annoyances in building the Dockerfile.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1"># Pick a previous version, because 4+ had issues</span>
<span class="s">FROM jekyll/jekyll:3.8.6</span>
<span class="c1"># The docker images uses a normal user instead of root (which is good), but that also means you can't just put everything in /app because the permissions are all fucked up then. Took me a while this one.</span>
<span class="s">RUN git clone https://github.com/thepycoder/website.git /srv/website</span>
<span class="s">WORKDIR /srv/website</span>
<span class="s">EXPOSE </span><span class="m">4000</span>

<span class="c1"># Now here's where permissions are fucking in a cryptic way for me. Don't know why I need it, but I need it and I hate it.</span>
<span class="s">RUN touch Gemfile.lock</span>
<span class="s">RUN chmod a+w Gemfile.lock</span>
<span class="c1"># Same with this junk, if we don't create the folders ourselves, stuff crashes on permission errors...</span>
<span class="s">RUN mkdir _site .jekyll-cache</span>
<span class="s">RUN jekyll build</span>
</pre></table></code></div></div><h2 id="digital-ocean-app-platform"><span class="mr-2">Digital Ocean App Platform</span><a href="#digital-ocean-app-platform" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Digital Ocean has a free tier in their app platform that allows you to host 3 static sites for free. It has nice integration with Github, so no need for setting up actions. The only thing we need to do is to create the Dockerfile that generates the static site files and point digital ocean to it!</p><p>To get it up and running create a new app and link it to your github or gitlab account. I only allow access to my website repo. <img data-src="/assets/images/step1.png" alt="Step 1" data-proofer-ignore></p><p>Then select your repo and branch name and leave auto deploy on. This is really handy as it will generate our site and update it every time we push to our selected branch. <img data-src="/assets/images/step2.png" alt="Step 2" data-proofer-ignore></p><p>In the next step, edit Type and select a static website. Then edit the output folder to the _site of your jekyll folder within the container. Now just choose a name and you should be good to go! <img data-src="/assets/images/step3.png" alt="Step 3" data-proofer-ignore></p><p>DigitalOcean will build the container every commit to the selected branch and then get all the static files from a specified folder in the container. It will then serve that. Pretty neat!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/devops/'>DevOps</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/jekyll/" class="post-tag no-text-decoration" >Jekyll</a> <a href="/tags/devops/" class="post-tag no-text-decoration" >DevOps</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >Docker</a> <a href="/tags/digital-ocean/" class="post-tag no-text-decoration" >Digital Ocean</a> <a href="/tags/cloud/" class="post-tag no-text-decoration" >Cloud</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Setting up a jekyll site for free using digital ocean and jekyll - Victor Sonck&amp;url=https://website-ayatu.ondigitalocean.app/posts/setting-up-jekyll/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://website-ayatu.ondigitalocean.app/posts/setting-up-jekyll/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/setting-up-jekyll/">Setting up a jekyll site for free using digital ocean and jekyll</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cloud/">Cloud</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/digital-ocean/">Digital Ocean</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/welcome/"><div class="card-body"> <em class="timeago small" data-ts="1646416560" > 2022-03-04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Welcome!</h3><div class="text-muted small"><p> You’ve stumbled upon my blog and portfolio. Right now there’s not that much here yet, I’m simply testing out the deployment workflow to get this webpage served. At this point in time, Google’s clo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/welcome/" class="btn btn-outline-primary" prompt="Older"><p>Welcome!</p></a> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/VictorSonck">Victor Sonck</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cloud/">Cloud</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/digital-ocean/">Digital Ocean</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
